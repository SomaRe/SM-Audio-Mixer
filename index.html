<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Audio Editor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        #videoPlayer {
            width: 100%;
            max-width: 800px;
        }
        .audio-track {
            margin-bottom: 20px;
        }
        .timeline {
            width: 100%;
            height: 50px;
            background-color: #f0f0f0;
            position: relative;
            margin-top: 10px;
        }
        .volume-point {
            width: 10px;
            height: 10px;
            background-color: #007bff;
            border-radius: 50%;
            position: absolute;
            top: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Video Audio Editor</h1>
    
    <video id="videoPlayer" controls>
        <source src="" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    
    <input type="file" id="videoUpload" accept="video/*">
    
    <div class="audio-track">
        <h3>Voice Track</h3>
        <input type="file" id="voiceUpload" accept="audio/*">
        <div id="voiceTimeline" class="timeline"></div>
    </div>
    
    <div class="audio-track">
        <h3>Music Track</h3>
        <input type="file" id="musicUpload" accept="audio/*">
        <div id="musicTimeline" class="timeline"></div>
    </div>
    
    <button id="processButton">Process Video</button>

    <script>
        const videoPlayer = document.getElementById('videoPlayer');
        const videoUpload = document.getElementById('videoUpload');
        const voiceUpload = document.getElementById('voiceUpload');
        const musicUpload = document.getElementById('musicUpload');
        const voiceTimeline = document.getElementById('voiceTimeline');
        const musicTimeline = document.getElementById('musicTimeline');
        const processButton = document.getElementById('processButton');

        videoUpload.addEventListener('change', (event) => {
            const file = event.target.files[0];
            const videoURL = URL.createObjectURL(file);
            videoPlayer.src = videoURL;
        });

        function createVolumePoint(timeline, position) {
            const point = document.createElement('div');
            point.className = 'volume-point';
            point.style.left = `${position}%`;
            timeline.appendChild(point);

            point.addEventListener('mousedown', startDragging);
        }

        function startDragging(e) {
            const point = e.target;
            const timeline = point.parentElement;
            const initialY = e.clientY;
            const initialTop = parseInt(point.style.top);

            function onMouseMove(e) {
                const deltaY = e.clientY - initialY;
                let newTop = initialTop + deltaY;
                newTop = Math.max(0, Math.min(newTop, 40));
                point.style.top = `${newTop}px`;
            }

            function onMouseUp() {
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
            }

            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        }

        voiceTimeline.addEventListener('click', (e) => {
            const rect = voiceTimeline.getBoundingClientRect();
            const position = ((e.clientX - rect.left) / rect.width) * 100;
            createVolumePoint(voiceTimeline, position);
        });

        musicTimeline.addEventListener('click', (e) => {
            const rect = musicTimeline.getBoundingClientRect();
            const position = ((e.clientX - rect.left) / rect.width) * 100;
            createVolumePoint(musicTimeline, position);
        });

        processButton.addEventListener('click', () => {
            // Here we would send the video, audio files, and volume data to the backend
            console.log('Processing video...');
            // You'll need to implement the actual AJAX call to your Python backend here
        });
    </script>
</body>
</html>